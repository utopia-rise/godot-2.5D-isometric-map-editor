name: Check PR - godot-library
on:
  pull_request:
    paths:
      - '**'

jobs:
  build:
    strategy:
      matrix:
        os: [ubuntu-latest, macos-latest, windows-latest]
        include:
          - os: ubuntu-latest
            platform: linux
          - os: macos-latest
            platform: osx
          - os: windows-latest
            platform: windows
    runs-on: ${{ matrix.os }}
    steps:
      - uses: actions/checkout@v2
      - uses: actions/setup-python@v2
        with:
          python-version: '3.x' # Version range or exact version of a Python version to use, using SemVer's version range syntax
          architecture: 'x64' # optional x64 or x86. Defaults to x64 if not specified
      - run: |
          python -m pip install --upgrade pip
          pip install scons
      - run: cd .. && git clone --recursive  https://github.com/utopia-rise/godot-cpp godot-cpp
      - run: wget https://downloads.tuxfamily.org/godotengine/3.2.1/Godot_v3.2.1-stable_osx.64.zip
        if: ${{ matrix.task }} == 'osx'
      - uses: montudor/action-zip@v0.1.0
        if: ${{ matrix.task }} == 'osx'
        with:
          args: unzip -qq Godot_v3.2.1-stable_osx.64.zip
      - run: ls -al